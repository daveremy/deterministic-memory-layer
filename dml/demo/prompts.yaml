# Demo prompt sequences with natural conversation and narrative
# Each prompt has: the actual prompt, and narrator commentary
#
# NOTE: Prompts need to be directive enough to trigger DML tool usage.
# Natural language + clear action request = best results.

simple:
  name: "Quick Demo"
  description: "3 prompts: record facts, add a constraint, watch it block a violating decision. Fast intro to core concepts."

  intro: |
    Quick demo of DML - Deterministic Memory Layer.

    This is LIVE - real Claude connected to the DML MCP server.
    Prompts are scripted, but Claude's responses are not.
    Watch the memory panel update in real-time.

  prompts:
    - prompt: |
        Hi! Record these facts about me: my name is Alice,
        I'm vegetarian, and I live in Portland.
      expects: facts
      context: |
        The user introduces themselves with basic facts.

        Watch the Facts panel - these will be captured as
        structured, queryable data.
      narrator: |
        Facts captured: name, diet, and location.
        These are structured data, not just text.

    - prompt: |
        Add a required constraint: never recommend steakhouses
        or meat-focused restaurants.
      expects: constraint
      context: |
        The user adds a dietary restriction as a constraint.

        This becomes a rule that the policy engine will enforce
        on all future decisions.
      narrator: |
        Constraint added. This rule will be enforced
        on all future decisions.

    - prompt: |
        Great! Now record a decision to go to Smith's Steakhouse
        for dinner tonight.
      expects: blocked
      context: |
        The user tries to book a steakhouse for dinner.

        Will the policy engine block this decision given
        the "never recommend steakhouses" constraint?
      narrator: |
        BLOCKED - the steakhouse decision violates
        the constraint.

  outro: |
    DML: Structured memory with enforcement.

japan_trip:
  name: "Japan Trip Planning"
  description: "Plan a trip, add a constraint late, watch it block an invalid booking, then use time-travel to explore 'what if?'"

  intro: |
    This is a LIVE demo - real Claude, real responses.

    Claude is connected to the DML MCP server and using the DML skill.
    The prompts are scripted, but Claude's responses are not.
    Every tool call you see is actually happening.

    DML gives Claude structured memory that can:
    - Capture facts with full provenance
    - Enforce constraints mathematically
    - Track decisions with audit trails
    - Replay alternate timelines

    Watch the right panel update in real-time as Claude records
    facts, constraints, and decisions.

  prompts:
    - prompt: |
        I'm planning a trip to Japan! Thinking spring 2026, maybe 10 days.
        I've got about $4000 saved up. Flying from Tucson.
        I'm really into traditional Japanese culture - temples, gardens,
        that sort of thing. Can you record all that?
      expects: facts
      context: |
        The user shares their trip details with Claude.

        Watch the Facts panel on the right - these details will be
        captured as structured data, not just conversation text.
      narrator: |
        STRUCTURED MEMORY

        Claude captured the user's trip details as structured facts -
        not buried in a transcript, but queryable data with full
        provenance. Each fact knows when it was created and can
        be traced back to this exact moment.

    - prompt: |
        I definitely want the authentic experience - a traditional ryokan
        with tatami rooms and onsen baths. Find me a good one in Kyoto
        and book it. I trust your judgment!
      expects: decision
      context: |
        The user asks Claude to find and book a traditional Japanese inn.

        Claude will make a recommendation and record a DECISION -
        a tracked commitment that can be audited later.
      narrator: |
        DECISION RECORDED

        Claude made a booking decision and recorded it. Unlike a normal
        chatbot, this decision is tracked separately - it can be
        validated against constraints, reversed, or analyzed later.

        Watch the Decisions panel on the right.

    - prompt: |
        Oh wait, important thing - my mom is coming with me and she
        uses a wheelchair. Add a required constraint: never book
        accommodations that are not wheelchair accessible.
      expects: constraint
      context: |
        The user reveals a critical requirement AFTER the booking.

        This accessibility need will become a CONSTRAINT - a rule
        that the policy engine enforces mathematically.
      narrator: |
        CONSTRAINT ADDED

        This is where traditional AI fails. The accessibility
        requirement is now a CONSTRAINT - a rule that must be
        satisfied by all future decisions.

        Watch what happens next...

    - prompt: |
        Actually, you know what, let's just confirm that ryokan booking.
        Record a decision to finalize the Ryokan Kurashiki reservation.
      expects: blocked
      context: |
        The user tries to confirm the original ryokan booking.

        But traditional ryokans have stairs and no elevators...
        Will the policy engine allow this decision?
      narrator: |
        BLOCKED BY POLICY ENGINE

        The booking was BLOCKED - not by Claude "deciding" to refuse,
        but by the policy engine mathematically preventing a constraint
        violation. Traditional ryokans have stairs and no elevators.

        This is deterministic enforcement. The agent literally cannot
        break the rules, no matter how it's prompted.

    - prompt: |
        You're right, that won't work. Check my constraints and find
        me an accessible alternative. Something with the onsen experience
        but wheelchair friendly.
      context: |
        The user asks Claude to find an alternative that works.

        Claude will query its memory to check constraints before
        making a new recommendation.
      narrator: |
        RECOVERY WITH MEMORY

        Claude queried its memory to check constraints before making
        a new recommendation. The system enforces rules while the
        agent adapts - all with a complete audit trail.

    - prompt: |
        That accessible onsen hotel sounds perfect. Record a decision
        to book that one instead.
      expects: decision
      context: |
        The user confirms the accessible alternative.

        This decision should pass all constraint checks and be
        committed to the immutable event log.
      narrator: |
        VALID DECISION COMMITTED

        This booking passed all constraint checks. The decision is
        now part of the immutable event log - traceable, auditable,
        and deterministically replayable.

    - prompt: |
        I'm curious about something. Use simulate_timeline to check -
        if I had mentioned the wheelchair requirement at the very start,
        would you have ever suggested that traditional ryokan?
      context: |
        The user asks a "what if" question about the past.

        DML can simulate alternate timelines - replaying history
        with different constraints to see what would have happened.
      narrator: |
        TIME TRAVEL / COUNTERFACTUAL ANALYSIS

        DML simulated an alternate timeline - same events, different
        ordering. It replayed history with the constraint injected
        earlier, proving the ryokan would have been blocked from
        the start.

        This isn't the LLM guessing. It's deterministic replay.

  outro: |
    DETERMINISTIC MEMORY LAYER

    This demo showed an AI agent that:

    • Captures structured facts with provenance
    • Enforces constraints mathematically
    • Tracks decisions with full audit trails
    • Replays alternate timelines deterministically

    This is event sourcing for AI agents.
    The future of reliable AI memory.

# High-stakes medical scenario - life/death consequences
clinical:
  name: "Clinical Decision Support"
  description: "High-stakes medical scenario: a drug allergy constraint blocks a dangerous prescription. Shows how DML can save lives."

  intro: |
    This is a LIVE demo - real Claude, real responses.

    Claude is connected to the DML MCP server and using the DML skill.
    The prompts are scripted, but Claude's responses are not.

    SCENARIO: Clinical decision support for medication management.
    In healthcare, forgotten allergies kill patients. Traditional chatbots
    bury critical information in conversation history.

    DML enforces safety constraints mathematically.
    Watch what happens when we try to prescribe a dangerous medication.

  prompts:
    - prompt: |
        New patient intake. Record these facts:
        Patient: Margaret Chen, 67 years old, female.
        Current medications: Lisinopril 10mg, Metformin 500mg.
        Conditions: Type 2 diabetes, hypertension.
        Primary care physician: Dr. Sarah Williams.
      expects: facts
      context: |
        A clinician enters patient information into the system.

        Watch the Facts panel - patient details are captured as
        structured, queryable medical records.
      narrator: |
        PATIENT RECORD CREATED

        Structured facts captured with full provenance.
        Unlike an EHR note buried in text, these are queryable,
        auditable data points that persist across the conversation.

    - prompt: |
        Important allergy information - add a required constraint:
        Never prescribe penicillin or amoxicillin. Patient has severe
        penicillin allergy with anaphylaxis risk.
      expects: constraint
      context: |
        Critical safety information: the patient has a drug allergy.

        This becomes a REQUIRED constraint - the policy engine will
        block any prescription that could trigger anaphylaxis.
      narrator: |
        CRITICAL SAFETY CONSTRAINT

        This isn't a note in a chart that might be overlooked.
        It's a mathematically enforced rule. Any decision involving
        penicillin-class drugs will be automatically blocked.

        In traditional systems, this allergy might be missed during
        a busy shift or system migration. DML makes it impossible.

    - prompt: |
        Patient presents with bacterial sinusitis. Standard treatment
        would be amoxicillin. Record a decision to prescribe
        Amoxicillin 500mg three times daily for 10 days.
      expects: blocked
      context: |
        The clinician attempts to prescribe the standard treatment.

        But amoxicillin is a penicillin-class antibiotic...
        Will the policy engine catch the danger?
      narrator: |
        PRESCRIPTION BLOCKED - LIFE SAVED

        Amoxicillin is a penicillin-class antibiotic.
        The prescription was BLOCKED before it could be written.

        This isn't Claude "being careful" - it's the policy engine
        mathematically preventing a constraint violation. The system
        cannot prescribe this medication, regardless of how it's asked.

        In a real hospital, this could prevent a fatal anaphylactic reaction.

    - prompt: |
        You're right, I forgot about the allergy. Check the patient's
        constraints and recommend a safe alternative antibiotic.
      context: |
        The clinician asks for a safe alternative.

        Claude will query memory to check constraints before
        recommending a different antibiotic.
      narrator: |
        SAFE ALTERNATIVE FOUND

        Claude queried memory, confirmed the penicillin constraint,
        and recommended a macrolide antibiotic (like azithromycin)
        that's safe for penicillin-allergic patients.

        The audit trail shows exactly why amoxicillin was rejected
        and how the alternative was selected.

    - prompt: |
        Good catch. Record a decision to prescribe azithromycin
        250mg, take two on day one then one daily for four more days.
      expects: decision
      context: |
        The clinician prescribes the safe alternative.

        This prescription should pass all constraint checks
        and be recorded with full audit trail.
      narrator: |
        SAFE PRESCRIPTION RECORDED

        This prescription passed all constraint checks.
        The decision is logged with full provenance - who prescribed it,
        when, and verification that safety constraints were satisfied.

    - prompt: |
        For the audit log - use simulate_timeline to verify:
        if the allergy had been recorded from the start,
        would amoxicillin have ever been possible to prescribe?
      context: |
        For compliance and audit purposes, the clinician asks
        a counterfactual question about the timeline.

        DML can replay history with different constraint ordering
        to prove what would have happened.
      narrator: |
        DETERMINISTIC AUDIT TRAIL

        DML replayed the entire timeline with the constraint
        present from the beginning. Result: amoxicillin would have
        been blocked immediately, before any recommendation.

        This isn't AI speculation - it's cryptographically verifiable
        replay of the decision history. Perfect for medical audits,
        malpractice defense, and regulatory compliance.

  outro: |
    DETERMINISTIC MEMORY LAYER - CLINICAL APPLICATIONS

    This demo showed constraint enforcement that could save lives:

    • Drug allergies enforced mathematically, not by memory
    • Prescriptions blocked BEFORE they can cause harm
    • Complete audit trail for every clinical decision
    • Deterministic replay for legal and regulatory review

    When the stakes are life and death,
    AI needs more than a chatbot's best guess.

    DML: Structured memory with mathematical guarantees.
